# QortexMusic
## Музыкальный каталог: исполнители, альбомы, песни

В данном проекте содержится код API для музыкального каталога.

Документация (доступна после запуска проекта):

http://127.0.0.1/swagger/

http://127.0.0.1/redoc/

Проект упакован в контейнеры Docker для локального запуска.

Добавлены .csv файлы вместе со специальной management-командой для заполнения БД.

Добавлена ссылка на готовую коллекцию запросов в Postman для тестирования.


### Технологии

Python 3.10, Django 4.2, DRF 3.14, Docker Compose, PostgreSQL 13.0, Gunicorn 21.2, Nginx 1.21

### Описание устройства каталога

Название исполнителя не может повторяться в каталоге.

Предполагается, что добавление альбомов происходит только с указанием уже добавленных в каталог исполнителей в качестве их авторов. На данный момент название альбома должно быть уникальным.
При добавлении альбома опционально добавляются треки из этого альбома с их порядковыми номерами. Названия треков как и их порядковые номера не могут дублироваться внутри альбома.

Предполагается, что добавление песен осуществляется только в уже находящиеся в каталоге альбомы. В альбом нельзя повторно добавить песню (передать название больше одного раза). В альбом нельзя добавить песню под уже занятым порядковым номером. Названия песен у разных исполнителей (в разных альбомах) могут повторяться.

Если песня добавлена в альбом, но мы хотели бы изменить её принадлежность к альбому либо её порядковый номер в альбоме, нужно удалить неактуальный объект песни и создать новый, приписав ему новые свойства. Именно для изменения доступно только название песни.
Для альбомов доступно изменение только названия, исполнителя и года его выпуска.

Пользователи не реализованы в проекте, но создана расширяемая модель пользователя для возможности дальнейшей её конфигурации при необходимости.

Что можно улучшить:
- сделать название альбома неуникальным на случай, когда у разных исполнителей есть альбомы с одинаковыми названиями.

### Запуск проекта локально

При необходимости установите Docker Desktop для вашей операционной системы (https://www.docker.com/products/docker-desktop/) и запустите его.

Склонируйте репозиторий:

```git clone git@github.com:tanja-ovc/music-app.git```

либо

```git clone https://github.com/tanja-ovc/music-app.git```

Добавьте файл с названием .env в music-app/qortexmusic (туда же, где .env.example) и заполните его:

```
SECRET_KEY=Buddy-youre-a-boy-make-a-big-noise-Playin-in-the-street-gonna-be-a-big-man-some-day
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1,web
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
```
Примечание: web - контейнер с кодом, db - контейнер с БД.

Из директории с docker-compose выполните:

```docker-compose up -d```

Для пересборки образа (в случае обновления содержимого проекта) дополните команду так:

```docker-compose up -d --build```

Примените миграции:

```docker-compose exec web python manage.py migrate```

Соберите статику:

```docker-compose exec web python manage.py collectstatic --no-input```

При желании создайте суперюзера (например, чтобы посмотреть админку):

```docker-compose exec web python manage.py createsuperuser```

### Тестирование API

Для удобства тестирования по желанию выполните команду загрузки тестовых данных в БД:

```docker-compose exec web python manage.py populate_db```

Готовой коллекцией запросов к данному API можно воспользоваться, нажав сюда:

[![Run in Postman](https://run.pstmn.io/button.svg)](https://app.getpostman.com/run-collection/17781130-5c353765-798e-4e08-b636-711c56434739?action=collection%2Ffork&source=rip_markdown&collection-url=entityId%3D17781130-5c353765-798e-4e08-b636-711c56434739%26entityType%3Dcollection%26workspaceId%3D72dc4e92-3f43-4d26-98c0-5cef41aa79c2)

Документация API:

http://127.0.0.1/swagger/

http://127.0.0.1/redoc/

### Автор проекта

Татьяна Овчинникова

https://github.com/tanja-ovc?tab=repositories

tanja.ovc@yandex.ru